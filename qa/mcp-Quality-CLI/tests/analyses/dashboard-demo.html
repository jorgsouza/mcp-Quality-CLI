<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç ReclameAQUI - Test Explorer (DEMO)</title>
    <style>
        /* [Mesmo CSS do dashboard-advanced.html] */
        :root {
            --trust-primary: #006837;
            --trust-primary-dark: #004d28;
            --trust-primary-light: #e8f5e9;
            --trust-blue: #0ea5e9;
            --trust-success: #22c55e;
            --trust-warning: #f59e0b;
            --trust-danger: #ef4444;
            --trust-purple: #9333ea;
            --trust-gray-50: #f9fafb;
            --trust-gray-100: #f3f4f6;
            --trust-gray-200: #e5e7eb;
            --trust-gray-300: #d1d5db;
            --trust-gray-500: #6b7280;
            --trust-gray-600: #4b5563;
            --trust-gray-700: #374151;
            --trust-gray-900: #111827;
            --space-2: 0.5rem;
            --space-3: 0.75rem;
            --space-4: 1rem;
            --space-6: 1.5rem;
            --space-8: 2rem;
            --font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            --text-xs: 0.75rem;
            --text-sm: 0.875rem;
            --text-base: 1rem;
            --text-lg: 1.125rem;
            --text-xl: 1.25rem;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
            --radius-md: 0.375rem;
            --radius-lg: 0.5rem;
            --radius-xl: 0.75rem;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: var(--font-sans); background: var(--trust-gray-50); color: var(--trust-gray-900); line-height: 1.6; }
        .header { background: var(--trust-primary); color: white; padding: var(--space-4) var(--space-6); box-shadow: var(--shadow-lg); }
        .header-content { max-width: 1400px; margin: 0 auto; display: flex; align-items: center; gap: var(--space-4); }
        .logo { display: flex; align-items: center; gap: var(--space-3); font-size: var(--text-xl); font-weight: 700; }
        .logo-icon { background: white; color: var(--trust-primary); width: 40px; height: 40px; border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center; font-weight: 900; }
        .demo-badge { background: var(--trust-warning); color: white; padding: var(--space-2) var(--space-4); border-radius: var(--radius-md); font-size: var(--text-xs); font-weight: 700; margin-left: auto; }
        .filters-section { background: white; border-bottom: 2px solid var(--trust-gray-200); padding: var(--space-6); box-shadow: var(--shadow-sm); }
        .filters-container { max-width: 1400px; margin: 0 auto; }
        .search-bar { display: flex; gap: var(--space-4); margin-bottom: var(--space-4); }
        .search-input { flex: 1; padding: var(--space-3) var(--space-4); border: 2px solid var(--trust-gray-300); border-radius: var(--radius-lg); font-size: var(--text-base); transition: all 0.2s; }
        .search-input:focus { outline: none; border-color: var(--trust-primary); box-shadow: 0 0 0 3px var(--trust-primary-light); }
        .filter-row { display: flex; gap: var(--space-4); flex-wrap: wrap; align-items: center; }
        .filter-group { display: flex; flex-direction: column; gap: var(--space-2); }
        .filter-label { font-size: var(--text-sm); font-weight: 600; color: var(--trust-gray-700); }
        .filter-select { padding: var(--space-2) var(--space-4); border: 2px solid var(--trust-gray-300); border-radius: var(--radius-md); font-size: var(--text-sm); background: white; cursor: pointer; min-width: 180px; }
        .clear-filters-btn { padding: var(--space-2) var(--space-4); background: white; border: 2px solid var(--trust-gray-300); border-radius: var(--radius-md); cursor: pointer; font-size: var(--text-sm); font-weight: 600; color: var(--trust-gray-700); transition: all 0.2s; }
        .clear-filters-btn:hover { background: var(--trust-gray-50); border-color: var(--trust-danger); color: var(--trust-danger); }
        .stats-bar { background: var(--trust-primary-light); padding: var(--space-4) var(--space-6); border-left: 4px solid var(--trust-primary); }
        .stats-content { max-width: 1400px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; font-size: var(--text-sm); color: var(--trust-gray-700); }
        .stats-info { font-weight: 600; }
        .main-content { max-width: 1400px; margin: 0 auto; padding: var(--space-6); }
        .tests-grid { display: grid; gap: var(--space-4); }
        .test-card { background: white; border-radius: var(--radius-lg); border: 2px solid var(--trust-gray-200); padding: var(--space-6); transition: all 0.3s; cursor: pointer; }
        .test-card:hover { border-color: var(--trust-primary); box-shadow: var(--shadow-lg); transform: translateY(-2px); }
        .test-card.expanded { border-color: var(--trust-primary); box-shadow: var(--shadow-lg); }
        .card-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: var(--space-4); gap: var(--space-4); }
        .card-title { flex: 1; }
        .test-name { font-size: var(--text-lg); font-weight: 700; color: var(--trust-gray-900); margin-bottom: var(--space-2); line-height: 1.4; }
        .test-file { font-size: var(--text-sm); color: var(--trust-gray-600); display: flex; align-items: center; gap: var(--space-2); }
        .badges { display: flex; gap: var(--space-2); flex-wrap: wrap; }
        .badge { padding: var(--space-2) var(--space-3); border-radius: var(--radius-md); font-size: var(--text-xs); font-weight: 700; text-transform: uppercase; display: inline-flex; align-items: center; gap: 6px; }
        .badge-e2e { background: #fae8ff; color: #9333ea; }
        .badge-unit { background: #dbeafe; color: #1d4ed8; }
        .badge-integration { background: #fef3c7; color: #b45309; }
        .badge-assert-strong { background: #dcfce7; color: #15803d; }
        .badge-assert-medium { background: #fef3c7; color: #b45309; }
        .badge-assert-weak { background: #fee2e2; color: #dc2626; }
        .card-content { display: grid; gap: var(--space-4); }
        .info-row { display: grid; grid-template-columns: 120px 1fr; gap: var(--space-3); padding: var(--space-3); background: var(--trust-gray-50); border-radius: var(--radius-md); }
        .info-label { font-size: var(--text-sm); font-weight: 600; color: var(--trust-gray-600); }
        .info-value { font-size: var(--text-sm); color: var(--trust-gray-900); }
        .smells-section { background: #fef2f2; border-left: 4px solid var(--trust-danger); padding: var(--space-4); border-radius: var(--radius-md); }
        .smells-title { font-size: var(--text-sm); font-weight: 700; color: var(--trust-danger); margin-bottom: var(--space-2); display: flex; align-items: center; gap: var(--space-2); }
        .smells-list { list-style: none; display: flex; flex-direction: column; gap: var(--space-2); }
        .smell-item { font-size: var(--text-sm); color: var(--trust-gray-700); display: flex; align-items: center; gap: var(--space-2); }
        .smell-item::before { content: '‚ö†Ô∏è'; font-size: 14px; }
        .suggestions-section { background: #eff6ff; border-left: 4px solid var(--trust-blue); padding: var(--space-4); border-radius: var(--radius-md); }
        .suggestions-title { font-size: var(--text-sm); font-weight: 700; color: var(--trust-blue); margin-bottom: var(--space-2); display: flex; align-items: center; gap: var(--space-2); }
        .suggestions-list { list-style: none; display: flex; flex-direction: column; gap: var(--space-2); }
        .suggestion-item { font-size: var(--text-sm); color: var(--trust-gray-700); display: flex; align-items: flex-start; gap: var(--space-2); }
        .suggestion-item::before { content: 'üí°'; font-size: 14px; flex-shrink: 0; }
        .details-section { margin-top: var(--space-4); padding-top: var(--space-4); border-top: 2px solid var(--trust-gray-200); display: none; }
        .details-section.visible { display: block; }
        .detail-block { margin-bottom: var(--space-4); }
        .detail-title { font-size: var(--text-sm); font-weight: 700; color: var(--trust-gray-700); margin-bottom: var(--space-2); display: flex; align-items: center; gap: var(--space-2); }
        .detail-content { background: var(--trust-gray-50); padding: var(--space-3); border-radius: var(--radius-md); font-size: var(--text-sm); color: var(--trust-gray-700); }
        .detail-list { list-style: none; display: flex; flex-direction: column; gap: var(--space-2); }
        .detail-list li { padding: var(--space-2); background: white; border-radius: var(--radius-md); border-left: 3px solid var(--trust-primary); }
        .expand-btn { margin-top: var(--space-4); width: 100%; padding: var(--space-3); background: var(--trust-gray-100); border: none; border-radius: var(--radius-md); cursor: pointer; font-size: var(--text-sm); font-weight: 600; color: var(--trust-gray-700); transition: all 0.2s; }
        .expand-btn:hover { background: var(--trust-primary-light); color: var(--trust-primary-dark); }
        .pagination { display: flex; justify-content: center; align-items: center; gap: var(--space-3); margin-top: var(--space-8); padding: var(--space-4); }
        .pagination button { padding: var(--space-3) var(--space-6); background: white; border: 2px solid var(--trust-gray-300); border-radius: var(--radius-md); cursor: pointer; font-weight: 600; transition: all 0.2s; }
        .pagination button:hover:not(:disabled) { background: var(--trust-primary); color: white; border-color: var(--trust-primary); }
        .pagination button:disabled { opacity: 0.5; cursor: not-allowed; }
        .pagination-info { font-size: var(--text-sm); color: var(--trust-gray-600); font-weight: 600; }
        .empty-state { text-align: center; padding: var(--space-8); color: var(--trust-gray-500); }
        .empty-state-icon { font-size: 4rem; margin-bottom: var(--space-4); }
        .coverage-bar { display: flex; align-items: center; gap: var(--space-3); margin-top: var(--space-2); }
        .coverage-progress { flex: 1; height: 8px; background: var(--trust-gray-200); border-radius: 999px; overflow: hidden; }
        .coverage-fill { height: 100%; background: var(--trust-success); transition: width 0.3s; }
        .coverage-text { font-size: var(--text-xs); font-weight: 700; color: var(--trust-gray-600); min-width: 50px; }
        @media (max-width: 768px) {
            .filter-row { flex-direction: column; align-items: stretch; }
            .filter-select { width: 100%; }
            .info-row { grid-template-columns: 1fr; }
            .search-bar { flex-direction: column; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">RA</div>
                <span>ReclameAQUI - Test Explorer</span>
            </div>
            <span class="demo-badge">üöÄ DEMO - Amostra de dados</span>
        </div>
    </header>
    
    <section class="filters-section">
        <div class="filters-container">
            <div class="search-bar">
                <input type="text" class="search-input" id="searchInput" placeholder="Ex: nl-command-flow.spec.ts">
                <button class="clear-filters-btn" onclick="clearFilters()">‚úï Limpar Filtros</button>
            </div>
            <div class="filter-row">
                <div class="filter-group">
                    <label class="filter-label">Tipo de Teste</label>
                    <select class="filter-select" id="typeFilter">
                        <option value="all">Todos os Tipos</option>
                        <option value="unit">Unit</option>
                        <option value="integration">Integration</option>
                        <option value="e2e">E2E</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label class="filter-label">For√ßa do Assert</label>
                    <select class="filter-select" id="assertFilter">
                        <option value="all">Todas as For√ßas</option>
                        <option value="forte">Forte</option>
                        <option value="m√©dio">M√©dio</option>
                        <option value="fraco">Fraco</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label class="filter-label">Code Smells</label>
                    <select class="filter-select" id="smellsFilter">
                        <option value="all">Todos</option>
                        <option value="with">Com Smells</option>
                        <option value="without">Sem Smells</option>
                    </select>
                </div>
            </div>
        </div>
    </section>
    
    <div class="stats-bar">
        <div class="stats-content">
            <span class="stats-info">Mostrando <span id="statsShowing">0</span> de <span id="statsTotal">5</span> testes</span>
            <span id="statsFilters"></span>
        </div>
    </div>
    
    <main class="main-content">
        <div class="tests-grid" id="testsGrid"></div>
        <div class="pagination">
            <button onclick="changePage(-1)" id="prevBtn">‚Üê Anterior</button>
            <span class="pagination-info" id="pageInfo">P√°gina 1 de 1</span>
            <button onclick="changePage(1)" id="nextBtn">Pr√≥xima ‚Üí</button>
        </div>
    </main>
    
    <script>
        // Dados de exemplo embutidos (5 testes para demo)
        const DEMO_DATA = [
            {
                "file": "/home/jorgesouza/Documents/dev/mcp-Quality-CLI/qa/mcp-Quality-CLI/tests/e2e/nl-command-flow.spec.ts",
                "name": "Comandos PT simples > should detect FULL mode from \"analise meu reposit√≥rio\"",
                "testType": "e2e",
                "functionUnderTest": ".toBe",
                "whatItTests": "Testa se .toBe detect FULL mode from \"analise meu reposit√≥rio\"",
                "whyItTests": "Verifica fluxo completo do ponto de vista do usu√°rio; Previne regress√µes no comportamento esperado; ‚ö†Ô∏è Asserts gen√©ricos podem deixar bugs passar",
                "purposeForWhat": "Garantir que fluxos cr√≠ticos de usu√°rio funcionem ponta a ponta; Manter confiabilidade e velocidade de entrega (KR3a)",
                "given": ["result = ..."],
                "when": ".toBe",
                "then": [],
                "mocks": [],
                "coverage": { "files": [], "linesCovered": 0, "linesTotal": 0, "coveredInDiffPct": 0 },
                "contracts": { "pact": false, "failed": 0, "interactions": 0 },
                "assertStrength": "fraco",
                "smells": ["Teste sem asserts"],
                "suggestions": [
                    "Trocar toBeTruthy/toBeFalsy por matchers espec√≠ficos",
                    "Validar status + corpo + headers em vez de s√≥ chamadas",
                    "Adicionar cen√°rio de erro (try-catch)"
                ]
            },
            {
                "file": "/home/jorgesouza/Documents/dev/mcp-Quality-CLI/src/tools/__tests__/auto.test.ts",
                "name": "deve calcular m√©tricas de qualidade",
                "testType": "unit",
                "functionUnderTest": "toBe",
                "whatItTests": "Testa se toBe calcular m√©tricas de qualidade",
                "whyItTests": "Garante integridade e precis√£o do c√°lculo; Valida l√≥gica de neg√≥cio; ‚ö†Ô∏è Asserts gen√©ricos podem deixar bugs passar",
                "purposeForWhat": "Garantir que c√°lculos cr√≠ticos estejam corretos; Evitar bugs em produ√ß√£o",
                "given": ["result = ...", "mock = vi.fn()"],
                "when": "toBe",
                "then": [],
                "mocks": ["vi.fn()"],
                "coverage": { "files": ["auto.ts"], "linesCovered": 450, "linesTotal": 500, "coveredInDiffPct": 90 },
                "contracts": { "pact": false, "failed": 0, "interactions": 0 },
                "assertStrength": "m√©dio",
                "smells": ["Teste sem asserts", "Mocks excessivos"],
                "suggestions": [
                    "Adicionar asserts mais espec√≠ficos",
                    "Reduzir depend√™ncia de mocks"
                ]
            },
            {
                "file": "/home/jorgesouza/Documents/dev/mcp-Quality-CLI/src/adapters/__tests__/typescript.test.ts",
                "name": "TypeScript Adapter > should detect framework correctly",
                "testType": "integration",
                "functionUnderTest": "detectFramework",
                "whatItTests": "Testa se detectFramework identifica corretamente o framework TypeScript",
                "whyItTests": "Valida detec√ß√£o autom√°tica de frameworks; Previne falsos positivos/negativos; Essencial para adaptadores multi-linguagem",
                "purposeForWhat": "Garantir compatibilidade com diferentes projetos; Suportar m√∫ltiplos frameworks",
                "given": ["adapter = new TypeScriptAdapter()", "mockProject = { package.json: {...} }"],
                "when": "detectFramework",
                "then": ["expect(result).toBe('vitest')", "expect(result.confidence).toBeGreaterThan(0.8)"],
                "mocks": [],
                "coverage": { "files": ["typescript.ts"], "linesCovered": 180, "linesTotal": 200, "coveredInDiffPct": 85 },
                "contracts": { "pact": true, "failed": 0, "interactions": 5 },
                "assertStrength": "forte",
                "smells": [],
                "suggestions": []
            },
            {
                "file": "/home/jorgesouza/Documents/dev/mcp-Quality-CLI/src/tools/__tests__/explain-tests.test.ts",
                "name": "deve gerar outputs JSON e MD conforme solicitado",
                "testType": "unit",
                "functionUnderTest": "explainTests",
                "whatItTests": "Testa se explainTests gera outputs JSON e MD corretamente",
                "whyItTests": "Valida formato e conte√∫do dos relat√≥rios; Garante conformidade com especifica√ß√£o; Previne regress√µes",
                "purposeForWhat": "Entregar relat√≥rios de qualidade para stakeholders; Documentar testes automaticamente",
                "given": ["options = { repo, product, format: 'md' }", "mockTests = [...]"],
                "when": "explainTests",
                "then": [
                    "expect(result.outputPaths).toHaveProperty('json')",
                    "expect(result.outputPaths).toHaveProperty('md')",
                    "expect(await fileExists(result.outputPaths.json)).toBe(true)"
                ],
                "mocks": ["vi.mock('glob')", "vi.mock('fs')"],
                "coverage": { "files": ["explain-tests.ts"], "linesCovered": 320, "linesTotal": 350, "coveredInDiffPct": 95 },
                "contracts": { "pact": false, "failed": 0, "interactions": 0 },
                "assertStrength": "forte",
                "smells": [],
                "suggestions": ["Adicionar teste para formato HTML"]
            },
            {
                "file": "/home/jorgesouza/Documents/dev/mcp-Quality-CLI/qa/mcp-Quality-CLI/tests/e2e/analyze-coverage-flow.spec.ts",
                "name": "deve validar health da pir√¢mide corretamente",
                "testType": "e2e",
                "functionUnderTest": "portfolioPlan",
                "whatItTests": "Testa se portfolioPlan valida health da pir√¢mide (Unit > Integration > E2E)",
                "whyItTests": "Verifica se a pir√¢mide de testes est√° balanceada; Identifica desbalanceamento cr√≠tico; Essencial para qualidade",
                "purposeForWhat": "Manter pir√¢mide saud√°vel; Evitar excesso de testes lentos (E2E); Otimizar tempo de CI/CD",
                "given": ["coverage = { unit: 60, integration: 30, e2e: 10 }"],
                "when": "portfolioPlan",
                "then": ["expect(result.health).toBe('saud√°vel')"],
                "mocks": [],
                "coverage": { "files": ["portfolio-plan.ts"], "linesCovered": 120, "linesTotal": 150, "coveredInDiffPct": 75 },
                "contracts": { "pact": false, "failed": 0, "interactions": 0 },
                "assertStrength": "m√©dio",
                "smells": ["Poucos asserts"],
                "suggestions": ["Validar thresholds configur√°veis", "Testar cen√°rios edge case"]
            }
        ];

        let allTests = DEMO_DATA;
        let filteredTests = [...allTests];
        let currentPage = 1;
        const itemsPerPage = 10;
        
        // [Mesmas fun√ß√µes do dashboard-advanced.html]
        function applyFilters() {
            const search = document.getElementById('searchInput').value.toLowerCase();
            const typeFilter = document.getElementById('typeFilter').value;
            const assertFilter = document.getElementById('assertFilter').value;
            const smellsFilter = document.getElementById('smellsFilter').value;
            
            filteredTests = allTests.filter(test => {
                const matchSearch = !search || test.name.toLowerCase().includes(search) || test.file.toLowerCase().includes(search);
                const matchType = typeFilter === 'all' || test.testType === typeFilter;
                const matchAssert = assertFilter === 'all' || test.assertStrength === assertFilter;
                const matchSmells = smellsFilter === 'all' || (smellsFilter === 'with' && test.smells.length > 0) || (smellsFilter === 'without' && test.smells.length === 0);
                return matchSearch && matchType && matchAssert && matchSmells;
            });
            
            currentPage = 1;
            updateStats();
            renderTests();
        }
        
        function updateStats() {
            const start = (currentPage - 1) * itemsPerPage + 1;
            const end = Math.min(currentPage * itemsPerPage, filteredTests.length);
            document.getElementById('statsShowing').textContent = filteredTests.length === 0 ? 0 : `${start}-${end}`;
            document.getElementById('statsTotal').textContent = allTests.length;
            
            const filters = [];
            const search = document.getElementById('searchInput').value;
            if (search) filters.push(`Busca: "${search}"`);
            if (document.getElementById('typeFilter').value !== 'all') filters.push(`Tipo: ${document.getElementById('typeFilter').value}`);
            if (document.getElementById('assertFilter').value !== 'all') filters.push(`Assert: ${document.getElementById('assertFilter').value}`);
            if (document.getElementById('smellsFilter').value !== 'all') filters.push(`Smells: ${document.getElementById('smellsFilter').value}`);
            document.getElementById('statsFilters').textContent = filters.length > 0 ? `Filtros ativos: ${filters.join(' ‚Ä¢ ')}` : '';
        }
        
        function renderTests() {
            const start = (currentPage - 1) * itemsPerPage;
            const end = start + itemsPerPage;
            const pageTests = filteredTests.slice(start, end);
            
            if (pageTests.length === 0) {
                document.getElementById('testsGrid').innerHTML = '<div class="empty-state"><div class="empty-state-icon">üîç</div><p>Nenhum teste encontrado.</p></div>';
            } else {
                document.getElementById('testsGrid').innerHTML = pageTests.map((test, idx) => createTestCard(test, idx)).join('');
            }
            
            const totalPages = Math.ceil(filteredTests.length / itemsPerPage);
            document.getElementById('pageInfo').textContent = `P√°gina ${currentPage} de ${totalPages}`;
            document.getElementById('prevBtn').disabled = currentPage === 1;
            document.getElementById('nextBtn').disabled = currentPage >= totalPages;
        }
        
        function createTestCard(test, idx) {
            const assertClass = test.assertStrength === 'forte' ? 'assert-strong' : test.assertStrength === 'm√©dio' ? 'assert-medium' : 'assert-weak';
            const fileName = test.file.split('/').pop();
            const coveragePct = test.coverage.linesTotal > 0 ? ((test.coverage.linesCovered / test.coverage.linesTotal) * 100).toFixed(1) : 0;
            
            return `
                <div class="test-card" id="card-${idx}">
                    <div class="card-header">
                        <div class="card-title">
                            <h3 class="test-name">${test.name}</h3>
                            <div class="test-file">üìÑ ${fileName}</div>
                        </div>
                        <div class="badges">
                            <span class="badge badge-${test.testType}">${test.testType}</span>
                            <span class="badge badge-${assertClass}">Assert: ${test.assertStrength}</span>
                        </div>
                    </div>
                    <div class="card-content">
                        <div class="info-row"><span class="info-label">üéØ O que testa:</span><span class="info-value">${test.whatItTests}</span></div>
                        <div class="info-row"><span class="info-label">‚ùì Por que testa:</span><span class="info-value">${test.whyItTests}</span></div>
                        <div class="info-row"><span class="info-label">üé¨ Para que:</span><span class="info-value">${test.purposeForWhat}</span></div>
                        <div class="info-row"><span class="info-label">‚öôÔ∏è Fun√ß√£o:</span><span class="info-value"><code>${test.functionUnderTest}</code></span></div>
                        ${test.smells.length > 0 ? `<div class="smells-section"><div class="smells-title">‚ö†Ô∏è Code Smells (${test.smells.length})</div><ul class="smells-list">${test.smells.map(s => `<li class="smell-item">${s}</li>`).join('')}</ul></div>` : ''}
                        ${test.suggestions.length > 0 ? `<div class="suggestions-section"><div class="suggestions-title">üí° Sugest√µes (${test.suggestions.length})</div><ul class="suggestions-list">${test.suggestions.map(s => `<li class="suggestion-item">${s}</li>`).join('')}</ul></div>` : ''}
                    </div>
                    <div class="details-section" id="details-${idx}">
                        <div class="detail-block"><div class="detail-title">üìù Given (Setup)</div>${test.given.length > 0 ? `<ul class="detail-list">${test.given.map(g => `<li>${g}</li>`).join('')}</ul>` : '<div class="detail-content">Nenhum setup</div>'}</div>
                        <div class="detail-block"><div class="detail-title">‚ö° When (A√ß√£o)</div><div class="detail-content">${test.when}</div></div>
                        <div class="detail-block"><div class="detail-title">‚úÖ Then (Asserts)</div>${test.then.length > 0 ? `<ul class="detail-list">${test.then.map(t => `<li>${t}</li>`).join('')}</ul>` : '<div class="detail-content">Nenhum assert</div>'}</div>
                        ${test.mocks.length > 0 ? `<div class="detail-block"><div class="detail-title">üé≠ Mocks/Spies</div><ul class="detail-list">${test.mocks.map(m => `<li>${m}</li>`).join('')}</ul></div>` : ''}
                        <div class="detail-block"><div class="detail-title">üìä Coverage</div><div class="coverage-bar"><div class="coverage-progress"><div class="coverage-fill" style="width: ${coveragePct}%"></div></div><span class="coverage-text">${coveragePct}%</span></div><div class="detail-content" style="margin-top: 0.5rem;">Linhas: ${test.coverage.linesCovered}/${test.coverage.linesTotal} ‚Ä¢ Diff: ${test.coverage.coveredInDiffPct.toFixed(1)}%</div></div>
                        <div class="detail-block"><div class="detail-title">ü§ù Contracts (CDC/Pact)</div><div class="detail-content">Pact: ${test.contracts.pact ? '‚úÖ Sim' : '‚ùå N√£o'} ‚Ä¢ Intera√ß√µes: ${test.contracts.interactions} ‚Ä¢ Falhas: ${test.contracts.failed}</div></div>
                    </div>
                    <button class="expand-btn" onclick="toggleDetails(${idx})"><span id="expand-text-${idx}">‚ñº Ver Detalhes Completos</span></button>
                </div>
            `;
        }
        
        function toggleDetails(idx) {
            const card = document.getElementById(`card-${idx}`);
            const details = document.getElementById(`details-${idx}`);
            const text = document.getElementById(`expand-text-${idx}`);
            if (details.classList.contains('visible')) {
                details.classList.remove('visible');
                card.classList.remove('expanded');
                text.textContent = '‚ñº Ver Detalhes Completos';
            } else {
                details.classList.add('visible');
                card.classList.add('expanded');
                text.textContent = '‚ñ≤ Ocultar Detalhes';
            }
        }
        
        function changePage(delta) {
            currentPage += delta;
            renderTests();
            updateStats();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        function clearFilters() {
            document.getElementById('searchInput').value = '';
            document.getElementById('typeFilter').value = 'all';
            document.getElementById('assertFilter').value = 'all';
            document.getElementById('smellsFilter').value = 'all';
            applyFilters();
        }
        
        document.getElementById('searchInput').addEventListener('input', applyFilters);
        document.getElementById('typeFilter').addEventListener('change', applyFilters);
        document.getElementById('assertFilter').addEventListener('change', applyFilters);
        document.getElementById('smellsFilter').addEventListener('change', applyFilters);
        
        // Iniciar
        applyFilters();
    </script>
</body>
</html>

